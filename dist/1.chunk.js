webpackJsonp([1],{638:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(379),a=n(639),s=n(640),l=n(642),c=n(644),u=n(646),d=n(648),p=function(){function e(){}return e}();p=r([o.NgModule({imports:[i.SharedModule,c.SelfServiceRoutingModule],declarations:[a.TaskListComponent,d.TaskList2Component,s.LoanRequestComponent,l.LeaveRequestComponent,u.TaskDetailsComponent]})],p),t.SelfServiceModule=p},639:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(41),s=n(41),l=n(585),c=n(43),u=n(626);n(299);var d=function(){function e(e,t,n,r,o,i){var a=this;this.workflowService=e,this.route=t,this.router=n,this.snackBar=r,this.selfServiceStore=o,this.storeHelper=i,this.columnDefs=[{checkboxSelection:!0,headerCheckboxSelection:!0,width:30,maxWidth:30},{headerName:"Leave Type",field:"LeaveType",filterParams:{newRowsAction:"keep"}},{headerName:"Person Name",field:"PersonName",filterParams:{newRowsAction:"keep"}},{headerName:"Job",field:"PersonJob",filterParams:{newRowsAction:"keep"}},{headerName:"From Date",filter:"date",valueGetter:this.computeFromDate,comparator:this.dateComparator,filterParams:{newRowsAction:"keep",apply:!0,comparator:function(e,t){var n=t,r=n.split("/"),o=new Date(Number(r[2]),Number(r[1])-1,Number(r[0]));return e.getTime()==o.getTime()?0:o<e?-1:o>e?1:void 0}}},{headerName:"To Date",valueGetter:this.computeToDate,comparator:this.dateComparator,filterParams:{newRowsAction:"keep"}},{headerName:"Status",field:"TaskStatusDisplay",filterParams:{newRowsAction:"keep"}}],this.gridOptions={columnDefs:this.columnDefs,rowData:null,api:null,enableSorting:!0,rowHeight:32,headerHeight:32,enableFilter:!0},this.index=0,this.subscription=this.selfServiceStore.workflowTasksChanges.subscribe(function(e){e&&a.gridOptions&&a.gridOptions.api&&(a.route.params.map(function(e){return e.id}).subscribe(function(t){for(var n,r=0,o=e.length;r<o;r++)if(e[r].TaskId==t){n=e[r];break}if(n){var i=e.indexOf(n);e.splice(i,1)}}),a.gridOptions.api.setRowData(e))})}return e.prototype.openSnackBar=function(){this.snackBar.open("Task(s) approved.","",{duration:2e3})},e.prototype.ngOnInit=function(){l.LicenseManager.setLicenseKey("ag-Grid_EvaluationLicense_100Devs27_January_2018__MTUxNzAxMTIwMDAwMA==8c9dff17620c1f17c7c34cb69061acb6"),this.workflowService.getPendingTasks()},e.prototype.ngDoCheck=function(){console.log("Change detector run...")},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.dateComparator=function(e,t){function n(e){if(void 0===e||null===e||10!==e.length)return null;var t=e.substring(6,10),n=e.substring(3,5),r=e.substring(0,2),o=1e4*t+100*n+r;return o}var r=n(e),o=n(t);return null===r&&null===o?0:null===r?-1:null===o?1:r-o},e.prototype.computeFromDate=function(e){function t(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}var n=e.data.FromDate;return t(n)},e.prototype.computeToDate=function(e){function t(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}var n=e.data.ToDate;return t(n)},e.prototype.onRowSelected=function(){},e.prototype.onRowClicked=function(e){var t=e.data.TaskId,n=e.data.InstanceId;this.router.navigate(["main/selfservice","taskdetails",t,n])},e.prototype.isButtonDisabled=function(){return this.index++,console.log(this.index+". Is button disabled"),this.gridOptions&&this.gridOptions.api?(this.btnDisabled=!1,!(this.gridOptions.api.getSelectedNodes().length>0)):(this.btnDisabled=!0,!0)},e.prototype.approveRequests=function(){var e=this.getSelectedTasks(!0);this.workflowService.approveRequests(e).subscribe()},e.prototype.rejectRequests=function(){var e=this.getSelectedTasks(!1);this.workflowService.approveRequests(e).subscribe()},e.prototype.getSelectedTasks=function(e){var t=this.gridOptions.api.getSelectedNodes();this.gridOptions.api.removeItems(t);for(var n=[],r=0;r<t.length;r++){var o=t[r].data,i={TaskId:o.TaskId,IsApproved:e,InstanceId:o.InstanceId,PersonId:o.PersonId};n.push(i)}return n},e}();d=r([i.Component({selector:"task-list",changeDetection:i.ChangeDetectionStrategy.OnPush,styles:["\n            .verticalLine {\n              border-left: thick solid #ff0000;\n            }"],template:'\n        <nav class="navbar navbar-light bg-faded" style="display: none;">\n          <form class="form-inline">\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="approveRequests()" [disabled]="isButtonDisabled()">Approve</button>\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="rejectRequests()" [disabled]="isButtonDisabled()">Reject</button>\n          </form>\n        </nav>\n\n        <ag-grid-ng2 #agGrid style="width: 100%; height: 320px;" class="ag-fresh"\n            [gridOptions]="gridOptions" rowSelection="multiple"\n            (rowSelected)="onRowSelected()" (rowClicked)="onRowClicked($event)" paginationInitialRowCount="10" \n            suppressRowClickSelection="true">\n        </ag-grid-ng2>\n\n    <div style="width: 100%; text-align: right;">\n        <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="approveRequests()" [disabled]="isButtonDisabled()">Approve</button>\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="rejectRequests()" [disabled]="isButtonDisabled()">Reject</button>\n    </div>\n\n    <button kendoButton [primary]="true">My Kendo UI Button</button>\n'}),o("design:paramtypes",[a.WorkflowService,c.ActivatedRoute,c.Router,u.MdSnackBar,s.SelfServiceStore,s.StoreHelper])],d),t.TaskListComponent=d},640:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(41),s=n(369),l=function(){function e(e,t){this.selfServiceService=e,this.newService=t}return e.prototype.ngOnInit=function(){this.employeeBalance=this.newService.getEmployeeBalance()},e.prototype.submitRequest=function(){var e=[];e.push({name:"Amount",value:"2000"}),e.push({name:"Currencty",value:"4440a738-405b-453e-9fea-ce868a3d7aa3"}),e.push({name:"IsAdvance",value:"true"}),this.selfServiceService.submitRequest("4FF68A29-35E8-4426-B979-741172FB87CC","40053                               ",e).subscribe()},e}();l=r([i.Component({selector:"loan-request",template:n(641)}),o("design:paramtypes",[a.SelfServiceService,s.NewService])],l),t.LoanRequestComponent=l},641:function(e,t){e.exports='<form class="col-xs-6 shadow-2" #authForm="ngForm" (submit)="submitRequest()">\r\n    <table cellspacing="5" cellpadding="5">\r\n        <tr>\r\n            <td style="width: 400px">\r\n                <label><input type="radio" checked="checked" required name="loantype" value="1" />Loan</label>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td style="width: 400px">\r\n                <label><input type="radio" required name="loantype" value="2" />Advance loan</label>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td style="width: 400px">\r\n                <label for="inputAmount">Amount</label>\r\n            </td>\r\n            <td style="width: 400px">\r\n                <input id="inputAmount" type="number" step="0.01" required />\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n                <label for="selectCurrency">Currency</label>\r\n            </td>\r\n            <td>\r\n                <select id="selectCurrency">\r\n                    <option>Lebanese Pound</option>\r\n                    <option>Dollar</option>\r\n                </select>\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td><label for="inputReason">Reason</label></td>\r\n            <td>\r\n                <textarea id="inputReason"></textarea>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div class="actions col-xs-12">\r\n        <div class="row center-xs">\r\n            <button type="submit" class="btn-light">Sumbit</button>\r\n        </div>\r\n    </div>\r\n</form>'},642:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(41),l=n(66),c=n(41),u=n(67);n(67);var d=n(371),p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.locale=t,r.localization=n,r.localization.translationProvider("./resources/locale-"),r.localization.updateTranslation(),r}return r(t,e),t}(d.Locale);t.SuperClass=p;var f=function(e){function t(t,n,r,o,i){var a=e.call(this,o,i)||this;return a.selfServiceService=t,a.selfServiceStore=n,a.store=r,a.locale=o,a.localization=i,a.leaveSubmited=!1,a.leaveTypes=[],a.selfServiceStore.userBalance=u.Observable.of(0),a.selfServiceStore.employeeDayDuty=u.Observable.of(0),a.localization.translationProvider("./resources/locale-"),a.localization.updateTranslation(),a}return r(t,e),t.prototype.isBtnDisabled=function(){return!0},t.prototype.ngDoCheck=function(){console.log("do check")},t.prototype.onLeaveTypeChange=function(e){this.selfServiceService.getUserBalance(e).subscribe()},t.prototype.ngOnInit=function(){this.selfServiceService.getAttendanceTypes().subscribe()},t.prototype.onBlurMethod=function(){this.leaveTypeId&&this.fromDate&&this.toDate&&this.selfServiceService.getEmployeeDayDuty(this.leaveTypeId,this.fromDate,this.toDate).subscribe()},t.prototype.ngOnDestroy=function(){},t.prototype.submitRequest=function(){var e=[];e.push({name:"DayDuty",value:this.selfServiceStore.employeeDayDuty.toString()}),e.push({name:"FromDate",value:this.fromDate}),e.push({name:"ToDate",value:this.toDate}),e.push({name:"EquivalentHours",value:this.selfServiceStore.employeeDayDuty.toString()}),e.push({name:"FullDay",value:"1"}),e.push({name:"Balance",value:this.selfServiceStore.userBalance.toString()}),e.push({name:"LeaveType",value:this.leaveTypeId}),e.push({name:"Remarks",value:"this is a test from angular2"}),this.selfServiceService.submitRequest("848ECD54-BF0B-4400-B842-7CA11559C5D8","40053                               ",e).subscribe(),this.leaveSubmited=!this.leaveSubmited},t}(p);f=o([a.Component({selector:"leave-request",changeDetection:a.ChangeDetectionStrategy.OnPush,template:n(643)}),i("design:paramtypes",[s.SelfServiceService,c.SelfServiceStore,l.Store,d.LocaleService,d.LocalizationService])],f),t.LeaveRequestComponent=f},643:function(e,t){e.exports='<div>\r\n    <form name="LeaveRequestForm" class="col-xs-6 shadow-2" #authForm="ngForm" (submit)="submitRequest()">\r\n        <div [hidden]="leaveSubmited">\r\n            <table cellspacing="5" cellpadding="5">\r\n                <tr>\r\n                    <td style="width: 400px">\r\n                        <label for="inputLeaveType">Leave Type</label>\r\n                    </td>\r\n                    <td style="width: 400px">\r\n                        <select id="inputLeaveType" class="selectpicker" name="inputLeaveType" [(ngModel)]="leaveTypeId" (change)="onLeaveTypeChange($event.target.value)">\r\n                            <option *ngFor="let leaveType of store.leaveTypes | async" [value]="leaveType.id">{{leaveType.description}}</option>\r\n                        </select>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        <label for="selectCurrency">Balance</label>\r\n                    </td>\r\n                    <td>\r\n                        <input id="txtBalance" value="{{ selfServiceStore.userBalance | async }}" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td><label for="inputReason">From Date/To</label></td>\r\n                    <td>\r\n                        <input id="txtFromDate" type="date" name="txtFromDate" (change)="onBlurMethod()" [(ngModel)]="fromDate" />\r\n                    </td>\r\n                    <td>\r\n                        <input id="txtToDate" type="date" name="txtToDate" (change)="onBlurMethod()" [(ngModel)]="toDate" />\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td><label for="inputReason">Duty Days</label></td>\r\n                    <td>\r\n                        <input id="txtToDate" type="number" name="txtDudyDays" value="{{selfServiceStore.employeeDayDuty | async}}" readonly="readonly" />\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n            <div class="actions col-xs-12">\r\n                <div class="row center-xs">\r\n                    <button type="submit" class="btn-light">Sumbit</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div [hidden]="!leaveSubmited" style="width: 500px">\r\n            Your leave request is submitted successfully.\r\n        </div>\r\n    </form>\r\n</div>'},644:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(43),a=n(645),s=n(640),l=n(642),c=n(646),u=n(648),d=[{path:"tasklist",component:a.TaskListComponent},{path:"tasklist2",component:u.TaskList2Component},{path:"leaverequest",component:l.LeaveRequestComponent},{path:"loanrequest",component:s.LoanRequestComponent},{path:"taskdetails/:taskid/:instanceid",component:c.TaskDetailsComponent}],p=function(){function e(){}return e}();p=r([o.NgModule({imports:[i.RouterModule.forChild(d)],exports:[i.RouterModule]})],p),t.SelfServiceRoutingModule=p},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(638);t.SelfServiceModule=r.SelfServiceModule;var o=n(644);t.SelfServiceRoutingModule=o.SelfServiceRoutingModule;var i=n(639);t.TaskListComponent=i.TaskListComponent;var a=n(640);t.LoanRequestComponent=a.LoanRequestComponent;var s=n(642);t.LeaveRequestComponent=s.LeaveRequestComponent},646:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(41),s=n(41),l=n(43),c=function(){function e(e,t,n,r,o){var i=this;this.workflowService=e,this.route=t,this.router=n,this.selfServiceStore=r,this.storeHelper=o,this.selfServiceStore.taskDetailsChanges.subscribe(function(e){i.instance=e})}return e.prototype.ngOnInit=function(){this.taskId=this.route.snapshot.params.taskid;var e=this.route.snapshot.params.instanceid;this.workflowService.getRequestDetails(e,this.taskId)},e.prototype.approveRequest=function(){var e=this.getTask(!0);this.workflowService.approveRequests(e).subscribe(),this.router.navigate(["main/selfservice","tasklist",{id:this.taskId}])},e.prototype.rejectRequest=function(){var e=this.getTask(!1);this.workflowService.approveRequests(e).subscribe(),this.router.navigate(["main/selfservice","tasklist",{id:this.taskId}])},e.prototype.getTask=function(e){var t=[],n={TaskId:this.taskId,IsApproved:e,InstanceId:this.instance.InstanceId,PersonId:this.instance.PersonId};return t.push(n),t},e.prototype.ngOnDestroy=function(){this.selfServiceStore.taskDetails.next({})},e}();c=r([i.Component({selector:"taskdetails",template:n(647),styles:["\n                td.container > div { width: 100%; height: 100%; overflow:hidden; }\n                td.container { height: 50px; }\n            "]}),o("design:paramtypes",[a.WorkflowService,l.ActivatedRoute,l.Router,s.SelfServiceStore,s.StoreHelper])],c),t.TaskDetailsComponent=c},647:function(e,t){e.exports='<a routerLink="../../../tasklist">Task List</a>\r\n<br /><br />\r\n\r\n<div *ngIf="instance && instance.PersonName">\r\n    <h2>Process Information</h2>\r\n    <hr />\r\n    <table>\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Requested By</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.PersonName}}\r\n            </td>\r\n            <td width="120px">\r\n                <b>Requested Date</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.RequestedDate}}\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Is On Behalf</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.IsOnBehalf}}\r\n            </td>\r\n            <td width="120px">\r\n                <b>Status</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.TaskStatusDisplay}}\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <br /><br />\r\n\r\n    <h2>Form</h2>\r\n    <hr />\r\n    <table>\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Leave Type</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.LeaveType}}\r\n            </td>\r\n            <td width="120px"></td>\r\n            <td width="200px"></td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Available Balance</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.AvailableBalance}}\r\n            </td>\r\n            <td width="120px"></td>\r\n            <td width="200px"></td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Duration</b>\r\n            </td>\r\n            <td width="200px">\r\n                <span *ngIf="instance.IsFullDay">{{instance.Duration}} Working Day(s)</span>\r\n                <span *ngIf="!instance.IsFullDay">{{instance.Duration}} Hour(s)</span>\r\n            </td>\r\n            <td width="120px"></td>\r\n            <td width="200px"></td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>From Date</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.FromDateDisplay}}\r\n                <span *ngIf="!instance.IsFullDay">{{instance.FromTimeDisplay}}</span>\r\n            </td>\r\n            <td width="120px">\r\n                <b>To Date</b>\r\n            </td>\r\n            <td width="200px">\r\n                {{instance.FromDateDisplay}}\r\n                <span *ngIf="!instance.IsFullDay">{{instance.ToTimeDisplay}}</span>\r\n            </td>\r\n        </tr>\r\n\r\n        <tr>\r\n            <td width="120px" height="25px">\r\n                <b>Remark</b>\r\n            </td>\r\n            <td width="200px" colspan="3">\r\n                {{instance.Notes}}\r\n            </td>\r\n            <td width="120px"></td>\r\n            <td width="200px"></td>\r\n        </tr>\r\n    </table>\r\n\r\n    <br /><br />\r\n    <div style="width: 90%; text-align: right;">\r\n        <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="approveRequest()">Approve</button>\r\n        <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="rejectRequest()">Reject</button>\r\n    </div>\r\n</div>\r\n'},648:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(41),s=n(41),l=n(43),c=n(626);n(299);var u=function(){function e(e,t,n,r,o,i){var a=this;this.workflowService=e,this.route=t,this.router=n,this.snackBar=r,this.selfServiceStore=o,this.storeHelper=i,this.gridData=[],this.columnDefs=[{checkboxSelection:!0,headerCheckboxSelection:!0,width:30,maxWidth:30},{headerName:"Leave Type",field:"LeaveType",filterParams:{newRowsAction:"keep"}},{headerName:"Person Name",field:"PersonName",filterParams:{newRowsAction:"keep"}},{headerName:"Job",field:"PersonJob",filterParams:{newRowsAction:"keep"}},{headerName:"From Date",filter:"date",valueGetter:this.computeFromDate,comparator:this.dateComparator,filterParams:{newRowsAction:"keep",apply:!0,comparator:function(e,t){var n=t,r=n.split("/"),o=new Date(Number(r[2]),Number(r[1])-1,Number(r[0]));return e.getTime()==o.getTime()?0:o<e?-1:o>e?1:void 0}}},{headerName:"To Date",valueGetter:this.computeToDate,comparator:this.dateComparator,filterParams:{newRowsAction:"keep"}},{headerName:"Status",field:"TaskStatusDisplay",filterParams:{newRowsAction:"keep"}}],this.gridOptions={columnDefs:this.columnDefs,rowData:null,api:null,enableSorting:!0,rowHeight:32,headerHeight:32,enableFilter:!0},this.index=0,this.subscription=this.selfServiceStore.workflowTasksChanges.subscribe(function(e){e&&(a.route.params.map(function(e){return e.id}).subscribe(function(t){for(var n,r=0,o=e.length;r<o;r++)if(e[r].TaskId==t){n=e[r];break}if(n){var i=e.indexOf(n);e.splice(i,1)}}),a.gridData=e)})}return e.prototype.openSnackBar=function(){this.snackBar.open("Task(s) approved.","",{duration:2e3})},e.prototype.ngOnInit=function(){this.workflowService.getPendingTasks()},e.prototype.ngDoCheck=function(){console.log("Change detector run...")},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.dateComparator=function(e,t){function n(e){if(void 0===e||null===e||10!==e.length)return null;var t=e.substring(6,10),n=e.substring(3,5),r=e.substring(0,2),o=1e4*t+100*n+r;return o}var r=n(e),o=n(t);return null===r&&null===o?0:null===r?-1:null===o?1:r-o},e.prototype.computeFromDate=function(e){function t(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}var n=e.data.FromDate;return t(n)},e.prototype.computeToDate=function(e){function t(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}var n=e.data.ToDate;return t(n)},e.prototype.onRowSelected=function(){},e.prototype.onRowClicked=function(e){var t=e.data.TaskId,n=e.data.InstanceId;this.router.navigate(["main/selfservice","taskdetails",t,n])},e.prototype.isButtonDisabled=function(){return this.index++,console.log(this.index+". Is button disabled"),this.gridOptions&&this.gridOptions.api?(this.btnDisabled=!1,!(this.gridOptions.api.getSelectedNodes().length>0)):(this.btnDisabled=!0,!0)},e.prototype.approveRequests=function(){var e=this.getSelectedTasks(!0);this.workflowService.approveRequests(e).subscribe()},e.prototype.rejectRequests=function(){var e=this.getSelectedTasks(!1);this.workflowService.approveRequests(e).subscribe()},e.prototype.getSelectedTasks=function(e){var t=this.gridOptions.api.getSelectedNodes();this.gridOptions.api.removeItems(t);for(var n=[],r=0;r<t.length;r++){var o=t[r].data,i={TaskId:o.TaskId,IsApproved:e,InstanceId:o.InstanceId,PersonId:o.PersonId};n.push(i)}return n},e}();r([i.Input(),o("design:type",Array)],u.prototype,"gridData",void 0),u=r([i.Component({selector:"task-list2",changeDetection:i.ChangeDetectionStrategy.OnPush,styles:["\n            .verticalLine {\n              border-left: thick solid #ff0000;\n            }"],template:'\n        <nav class="navbar navbar-light bg-faded" style="display: none;">\n          <form class="form-inline">\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="approveRequests()" [disabled]="isButtonDisabled()">Approve</button>\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="rejectRequests()" [disabled]="isButtonDisabled()">Reject</button>\n          </form>\n        </nav>\n\n        <kendo-grid [data]="gridData" [height]="370">\n          <kendo-grid-column field="LeaveType" title="Leave Type" width="40">\n          </kendo-grid-column>\n          <kendo-grid-column field="PersonName" title="Person Name" width="250">\n          </kendo-grid-column>\n          <kendo-grid-column field="PersonJob" title="Job">\n          </kendo-grid-column>\n          <kendo-grid-column field="FromDate" title="FromDate" width="80">\n          </kendo-grid-column>\n          <kendo-grid-column field="ToDate" title="ToDate" width="80">\n          </kendo-grid-column>\n        </kendo-grid>\n\n    <div style="width: 100%; text-align: right;">\n        <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="approveRequests()" [disabled]="isButtonDisabled()">Approve</button>\n            <button class="btn btn-outline-success" type="button" style="width: 100px" (click)="rejectRequests()" [disabled]="isButtonDisabled()">Reject</button>\n    </div>\n\n    <button kendoButton [primary]="true">My Kendo UI Button</button>\n'}),o("design:paramtypes",[a.WorkflowService,l.ActivatedRoute,l.Router,c.MdSnackBar,s.SelfServiceStore,s.StoreHelper])],u),t.TaskList2Component=u}});
//# sourceMappingURL=1.map